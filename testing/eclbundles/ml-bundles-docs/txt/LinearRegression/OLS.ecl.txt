IMPORTS
=======


ML_Core <../ML_Core/pkg.toc.txt>
ML_Core.Types <../ML_Core/Types.ecl.txt>
PBblas <../PBblas/pkg.toc.txt>
PBblas.Types <../PBblas/Types.ecl.txt>
PBblas.Converted <../PBblas/Converted.ecl.txt>
PBblas.MatUtils <../PBblas/MatUtils.ecl.txt>
ML_Core.Math <../ML_Core/Math/pkg.toc.txt>

DESCRIPTIONS
============


MODULE : OLS(DATASET(NumericField) X=empty_data, DATASET(NumericField) Y=empty_data)
----------------------------------------------------------------------------------------------------------------------------------

Ordinary Least Squares (OLS) Linear Regression aka Ordinary Linea
r Regression Regression learns a function that maps a set of inpu
t data (independents) to one or more output variables (dependents
). The resulting learned function is known as the model. That mod
el can then be used repetitively to predict (i.e. estimate) the o
utput value(s) based on new input data. Two major use cases are s
upported: 1) Learn and return a model 2) Use an existing (e.g. pe
rsisted) model to predict new values for Y Of course, both can be
 done in a single run. Alternatively, the model can be persisted 
and used indefinitely for prediction of Y values, as long as the 
record format has not changed, and the original training data rem
ains representative of the population. OLS supports any number of
 independent variables (Multiple Regression) and multiple depende
nt variables (Multivariate Regression). In this way, multiple var
iables' values can be predicted from the same input (i.e. indepen
dent) data. Training data is presented as parameters to this modu
le. When using a previously persisted model (use case 2 above), t
hese parameters should be omitted. This module provides a rich se
t of analytics to assess the usefulness of the resulting linear r
egression model, and to determine the best subset of independent 
variables to include in the model. These include: For the whole m
odel: - Analysis of Variance (ANOVA) - R-squared - Adjusted R-squ
ared - F-Test - Akaike Information Criterion (AIC) For each coeff
icient: - Standard Error (SE) - T-statistic - P-value - Confidenc
e Interval

Parameter : X The independent variable training data in DATASET(NumericField)
             format. Each observation (e.g. record) is identified by 'id', an
            d each feature is identified by field number (i.e. 'number'). Omi
            t this parameter when predicting from a persisted model.

Parameter : Y The dependent variable training data in DATASET(NumericField) f
            ormat. Each observation (e.g. record) is identified by 'id', and 
            each feature is identified by field number. Omit this parameter w
            hen predicting from a persisted model.

Parent : ML_Core.Interfaces.IRegression <../ML_Core/Interfaces/IRegression.ecl.txt>

Link : <None>
    
    ATTRIBUTE : DATASET(Layout_Model) GetModel | OVERRIDE
    ----------------------------------------------------------------------------------------------------------------------------------
    
    GetModel Returns the learned model that maps X's to Y's. In the c
    ase of OLS, the model represents a set of Betas which are the coe
    fficients of the linear model: Beta0 * 1 + Beta1 * Field1 + Beta2
     * Field2 ... The ID of each model record specifies to which Y va
    riable the coefficient applies. The Field Number ('number') indic
    ates to which field of X the beta is to be applied. Field number 
    1 provides the intercept portion of the linear model and is alway
    s multiplied by 1. Note that if multiple work-items are provided 
    within X and Y, there will be multiple models returned. The model
    s can be separated by their work item id (i.e. 'wi'). A single mo
    del can be extracted from a myriad model by using e.g., model(wi=
    myWI_id). GetModel should not be called when predicting using a p
    reviously persisted model (i.e. when training data was not passed
     to the module.
    
    Return : Model in DATASET(Layout_Model) format
    
    See : ML_core/Types.Layout_Model
    
    Link : <None>
    
    FUNCTION : DATASET(NumericField) Betas(DATASET(Layout_Model) model=GetModel)
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Return raw Beta values as numeric fields Extracts Beta values fro
    m the model. Can be used during training and prediction phases. F
    or use during training phase, the 'model' parameter can be omitte
    d. GetModel will be called to retrieve the model based on the tra
    ining data. For use during prediction phase, a previously persist
    ed model should be provided. The 'number' field of the returned N
    umericField records specifies to which Y the coefficient applies.
     The 'id' field of the returned record indicates the position of 
    the Beta value. ID = 1 provides the Beta for the constant term (i
    .e. the Y intercept) while subsequent values reflect the Beta for
     each correspondingly numbered X feature. Feature 1 corresponds t
    o Beta with 'id' = 2 and so on. If 'model' contains multiple work
    -items, Separate sets of Betas will be returned for each of the '
    myriad' models (distinguished by 'wi').
    
    Parameter : model Optional parameter provides a model that was previously ret
                rieved using GetModel. If omitted, GetModel will be used as the m
                odel.
    
    Return : DATASET(NumericField) containing the Beta values.
    
    Link : <None>
    
    FUNCTION : DATASET(NumericField) Predict(DATASET(NumericField) newX, DATASET(Layout_Model) model=GetModel) | OVERRIDE
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Predict the dependent variable values (Y) for any set of independ
    ent variables (X). Returns a predicted Y values for each observat
    ion (i.e. record) of X. This supports the 'myriad' style interfac
    e in that multiple independent work items may be present in 'newX
    ', and multiple independent models may be provided in 'model'. Th
    e resulting predicted values will also be separable by work item 
    (i.e. wi).
    
    Parameter : newX The set of observations of independent variables in DATASET(
                NumericField) format.
    
    Parameter : model Optional. A model that was previously returned from GetMode
                l (above). Note that a model from a previous run will only be val
                id if the field numbers in X are the same as when the model was l
                earned. If this parameter is omitted, the current model will be u
                sed.
    
    Return : An estimation of the corresponding Y value for each observation o
             f newX. Returned in DATASET(NumericField) format with field numbe
             r (i.e. 'number') indicating the dependent variable that is predi
             cted.
    
    Link : <None>
    
    TRANSFORM : R2Rec makeRSQ(CoCoRec coco)
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Link : <None>
    
    ATTRIBUTE : DATASET(R2Rec) RSquared
    ----------------------------------------------------------------------------------------------------------------------------------
    
    RSquared Calculate the R-Squared Metric used to assess the fit of
     the regression line to the training data. Since the regression h
    as chosen the best (i.e. least squared error) line matching the d
    ata, this can be thought of as a measurement of the linearity of 
    the training data. R Squared generally varies between 0 and 1, wi
    th 1 indicating an exact linear fit, and 0 indicating that a line
    ar fit will have no predictive power. Negative values are possibl
    e under certain conditions, and indicate that the mean(Y) will be
     more predictive than any linear fit. Moderate values of R square
    d (e.g. .5) may indicate that the relationship of X -&gt; Y is no
    n-linear, or that the measurement error is high relative to the l
    inear correlation (e.g. many outliers). In the former case, incre
    asing the dimensionality of X, such as by using polynomial varian
    ts of the features, may yield a better fit. R squared always incr
    eases when additional independent variables are added, so it shou
    ld not be used to determine the optimal set of X variables to inc
    lude. For that purpose, use Adjusted R Squared (below) which pena
    lizes larger numbers of variables. Note that the result of this c
    all is only meaningful during training phase (use case 1 above) a
    s it is an analysis based on the training data which is not provi
    ded during a prediction-only phase.
    
    Return : DATASET(R2Rec) with one record per dependent variable, per work-i
             tem. The number field indicates the dependent variable and coresp
             onds to the number field of the dependent (Y) variable to which i
             t applies.
    
    Link : <None>
    
    RECORD : AnovaRec
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Link : <None>
    
    TRANSFORM : AnovaRec calcAnova(tmpRec le)
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Link : <None>
    
    ATTRIBUTE : Anova
    ----------------------------------------------------------------------------------------------------------------------------------
    
    ANOVA (Analysis of Variance) report Analyzes the sources of varia
    nce. Basic ANOVA equality: Model + Error = Total Determines how m
    uch of the variance of Y is explained by the regression model, ve
    rsus how much is due to the error term (i.e. unexplained variance
    ). This attribute is only meaningful during the training phase. P
    rovides one record per work-item. Each record provides the follow
    ing statistics: - Total_SS -- Total Sum of Squares (SS) variance 
    of the dependent data - Model_SS -- The SS variance represented w
    ithin the model - Error_SS -- The SS variance not reflected by th
    e model (i.e. Total_SS - Error_SS) - Total_DF -- The total degree
    s of freedom within the dependent data - Model_DF -- Degrees of f
    reedom of the model - Error_DF -- Degrees of freedom of the error
     component - Total_MS -- The Mean Square (MS) variance of the dep
    endent data - Model_MS -- The Mean Square (MS) variance represent
    ed within the model - Error_MS -- The MS variance not reflected b
    y the model - Model_F -- The F-Test statistic: Model_MS / Error_M
    S
    
    Return : DATASET(AnovaRec), one per work-item per dependent (Y) variable T
             he number field indicates the dependent variable to which the ana
             lysis applies.
    
    Link : <None>
    
    ATTRIBUTE : DATASET(NumericField) SE
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Standard Error of the Regression Coefficients Describes the varia
    bility of the regression error for each coefficient. Only meaning
    ful during the training phase.
    
    Return : DATASET(NumericField), one record per Beta coefficient per depend
             ent variable per work-item. The 'id' field is the coefficient num
             ber, with 1 being the Y intercept, 2 being the coefficient for th
             e first feature, etc. The 'number' field indicates the dependent 
             variable to which the coefficient applies.
    
    Link : <None>
    
    ATTRIBUTE : DATASET(NumericField) TStat
    ----------------------------------------------------------------------------------------------------------------------------------
    
    T-Statistic The T-statistic identifies the significance of the va
    lue of each regression coefficient. Its calculation is simply the
     value of the coefficient divided by the Standard Error of the co
    efficient. A larger absolute value of the T-statistic indicates t
    hat the coefficient is more significant. Only meaningful during t
    he training phase.
    
    Return : DATSET(NumericField), one record per Beta coefficient per depende
             nt variable per work-item. The 'id' field is the coefficient numb
             er, with 1 being the Y intercept, 2 being the coefficient for the
              first feature, etc. The number field indicates the dependent var
             iable to which the coefficient applies.
    
    Link : <None>
    
    ATTRIBUTE : DATASET(R2Rec) AdjRSquared
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Adjusted R2 Calculate Adjusted R Squared which is a scaled versio
    n of R Squared that does not arbitrarily increase with the number
     of features. Adjusted R2, rather than R2 should always be used w
    hen trying to determine the best set of features to include in a 
    model. When adding features, R2 will always increase, whether or 
    not it improves the predictive power of the model. Adjusted R2, h
    owever, will only increase with the predictive power of the model
    .
    
    Return : DATASET(R2Rec), one record per dependent variable per work-item. 
             The number field indicates the dependent variable and corresponds
              to the number field of the dependent (Y) variable to which it ap
             plies.
    
    Link : <None>
    
    RECORD : AICRec
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Link : <None>
    
    ATTRIBUTE : DATASET(AICRec) AIC
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Akaike Information Criterion (AIC) Information theory based crite
    rion for assessing Goodness of Fit (GOF). Lower values mean bette
    r fit.
    
    Return : DATASET(AICRec), one record per dependent variable per work-item.
              The number field indicates the dependent variable and correspond
             s to the number field of the dependent (Y) variable to which it a
             pplies.
    
    Link : <None>
    
    RECORD : RangeVec
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Link : <None>
    
    MODULE : DistributionBase(t_Count Nranges = 10000)
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Link : <None>
        
        ATTRIBUTE : Low
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        ATTRIBUTE : High
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : t_FieldReal Density(t_FieldReal t)
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        ATTRIBUTE : RangeWidth
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : DATASET(RangeVec) DensityV()
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : CumulativeV()
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : t_FieldReal Cumulative(t_FieldReal t)
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : t_FieldReal NTile(t_FieldReal Pc)
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : InvDensity(t_FieldReal delta)
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        ATTRIBUTE : Discrete
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
    
    MODULE : TDistribution(t_Discrete v_in,t_Count NRanges = 10000)
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Parent : LinearRegression.OLS.DistributionBase <OLS.ecl.txt>
    
    Link : <None>
        
        FUNCTION : DATASET(RangeVec) DensityV() | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : t_FieldReal NTile(t_FieldReal Pc) | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        ATTRIBUTE : Discrete | INHERITED
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : InvDensity(t_FieldReal delta) | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        ATTRIBUTE : High | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        ATTRIBUTE : Low | INHERITED
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        ATTRIBUTE : RangeWidth | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : t_FieldReal Density(t_FieldReal t) | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : CumulativeV() | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : t_FieldReal Cumulative(t_FieldReal t) | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
    
    MODULE : FDistribution(t_Discrete d1_in, t_Discrete d2_in, t_Count NRanges = 10000)
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Parent : LinearRegression.OLS.DistributionBase <OLS.ecl.txt>
    
    Link : <None>
        
        FUNCTION : DATASET(RangeVec) DensityV() | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : CumulativeV() | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : t_FieldReal Cumulative(t_FieldReal t) | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : t_FieldReal NTile(t_FieldReal Pc) | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : InvDensity(t_FieldReal delta) | INHERITED
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        ATTRIBUTE : Discrete | INHERITED
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        ATTRIBUTE : Low | INHERITED
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        ATTRIBUTE : High | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        ATTRIBUTE : RangeWidth | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : t_FieldReal Density(t_FieldReal t) | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
    
    MODULE : NormalDistribution(t_Count NRanges)
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Parent : LinearRegression.OLS.DistributionBase <OLS.ecl.txt>
    
    Link : <None>
        
        ATTRIBUTE : Low | INHERITED
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        ATTRIBUTE : High | INHERITED
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        ATTRIBUTE : RangeWidth | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : DATASET(RangeVec) DensityV() | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : CumulativeV() | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : t_FieldReal Cumulative(t_FieldReal t) | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : t_FieldReal NTile(t_FieldReal Pc) | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : InvDensity(t_FieldReal delta) | INHERITED
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        ATTRIBUTE : Discrete | INHERITED
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
        
        FUNCTION : t_FieldReal Density(t_FieldReal t) | OVERRIDE
        ----------------------------------------------------------------------------------------------------------------------------------
        
        Link : <None>
    
    ATTRIBUTE : pVal
    ----------------------------------------------------------------------------------------------------------------------------------
    
    P-Value Calculate the P-value for each coefficient, which is the 
    probability that the coefficient is insignificant (i.e. actually 
    zero). A low P-value (e.g. .05) provides evidence that the coeffi
    cient is significant in the model. A high P-value indicates that 
    the coefficient value should, in fact, be zero. P-value is relate
    d to the T-Statistic, and can be thought of as a normalized versi
    on of the T-Statistic. Only meaningful during the training phase.
    
    Return : DATSET(NumericField), one record per Beta coefficient per depende
             nt variable per work-item. The 'id' field is the coefficient numb
             er, with 1 being the Y intercept, 2 being the coefficient for the
              first feature, etc. The number field indicates the dependent var
             iable and corresponds to the number field of the dependent (Y) va
             riable to which it applies.
    
    Link : <None>
    
    RECORD : ConfintRec
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Link : <None>
    
    FUNCTION : ConfInt(Types.t_fieldReal level)
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Confidence Interval The Confidence Interval determines the upper 
    and lower bounds of each estimated coefficient given a confidence
     level (level) that is required. For example, one could say that 
    there is a 95% probability (level) that the coefficient of the fi
    rst independent variable is between 2.05 and 3.62. This allows er
    ror margins to be determined with the desired confidence level. I
    f the confidence interval spans zero, it implies that the coeffic
    ient may not be significant at the specified confidence level.
    
    Parameter : level The level of confidence required, expressed as a percentage
                 from 0.0 to 100.0
    
    Return : DATASET(ConfintRec) with one record per coefficient per dependent
              variable per work-item. The 'id' field is the coefficient number
             , with 1 being the Y intercept, 2 being the coefficient for the f
             irst feature, etc. The number field indicates the dependent varia
             ble and corresponds to the number field of the dependent (Y) vari
             able to which it applies.
    
    Link : <None>
    
    RECORD : FTestRec
    ----------------------------------------------------------------------------------------------------------------------------------
    
    Link : <None>
    
    ATTRIBUTE : DATASET(FTestRec) FTest
    ----------------------------------------------------------------------------------------------------------------------------------
    
    F-Test Calculate the P-value for the full regression, which is th
    e probability that all of the coefficients are insignificant (i.e
    . actually zero). A low P-value (e.g. .05) provides evidence that
     at least one coefficient is significant. A high P-value indicate
    s that all the coefficient values should in fact be zero, implyin
    g that the regression has no statistically significant predictive
     power. P-value is related to the ANOVA F-Statistic, and can be t
    hought of as a standardized version of the ANOVA F-Statistic. The
     F-Test and T-Test are similar, except that the T-test is used to
     test the significance of each coefficient, while the F-Test is u
    sed to test the significance of the entire regression. For simple
     linear regression (i.e. only one independent variable, the T-Tes
    t and F-Test are equivalent.
    
    Return : DATASET(FTestRec), one record per dependent variable per work-ite
             m. The number field indicates the dependent variable and correspo
             nds to the number field of the dependent (Y) variable to which it
              applies.
    
    Link : <None>
